+++
date = 2017-10-24T09:04:47Z
description = "Подвох с решением «показать топ-N результатов» и кнопкой «показать все»."
featured = true
image = "/show-all/cover.png"
slug = "show-all"
tags = ["interface"]
title = "Приём «показать все»"
+++

Распространённый приём: когда есть неизвестное, но потенциально большое количество элементов (например, результатов поиска), показывать топ-N и кнопку «показать все».

<div class="row">
<div class="col-xs-12 col-sm-8 col-md-6">
  <img alt="Показать все" src="show-all-1.png">
</div>
</div>

Самый большой облом для пользователя: жмёшь на «показать все», и обнаруживаешь, что элементов всего и было N штук, то есть ничего нового ты не увидел.

Идеальный вариант — точно знать общее количество элементов, и сообщить пользователю. Но посчитать все элементы может быть вычислительно «дорого».

Есть алгоритм, который решает проблему. Я сначала покажу на примере, а потом напишу общее правило.

> Пусть есть виджет с результатами поиска, в котором показываем 3 наиболее релевантных результата и кнопку «показать все». При этом места на экране мало, в виджете можем уместить:
> - 3 результата + кнопку,
> - или 4 результата без кнопки.

Решение: вместо топ-3 попробуем запросить у сервера топ-6, и дальше:

1. Если нашлось 4 или меньше результатов, просто покажем их, без всяких кнопок:

<div class="row">
<div class="col-xs-12 col-sm-8 col-md-6">
  <img alt="Показать без кнопки" src="show-without-button-1.png">
</div>
</div>

2. Если нашлось 5 результатов, покажем топ-3 и кнопку с конкретным «остатком»:

<div class="row">
<div class="col-xs-12 col-sm-8 col-md-6">
  <img alt="Показать с остатком" src="show-more-1.png">
</div>
</div>

3. Наконец, если нашлось 6 результатов (это значит, что их может быть и больше), покажем топ-3 и кнопку «показать все»:

<div class="row">
<div class="col-xs-12 col-sm-8 col-md-6">
  <img alt="Показать все" src="show-all-1.png">
</div>
</div>

<p class="text-centered">⌘ ⌘ ⌘</p>

Теперь общее правило:

1. Вместо `N` запрашивать `2N` элементов.
2. Если нашлось `X ≤ 1,5N` элементов — показать все без кнопки.
3. Если нашлось `1,5N < X < 2N` — показать `N` и кнопку с остатком.
4. Если нашлось ровно `2N` — показать `N` и кнопку «показать все».

P. S. Спасибо Саше Кириллову за замечания.

<div class="row">
<div class="col-xs-12 col-sm-10 col-md-8"><p><em>Заметка из телеграм-канала <span class="nowrap"><i class="fa fa-star-o color-sin"></i> «<a href="https://t.me/dangry">Интерфейсы без шелухи</a>»</span></em></p></div>
</div>

