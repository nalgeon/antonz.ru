+++
date = 2022-05-23T15:30:00Z
title = "Случайные числа и последовательности в Python"
description = "Там намного больше, чем просто randint()"
image = "/random/cover.png"
slug = "random"
tags = ["ohmypy"]
subscribe = "ohmypy"
+++

Все знают про `random.randint(a, b)`, который возвращает случайное число в указанном диапазоне:

```python
random.randint(10, 99)
# 59
```

Но модуль `random` предоставляет намного больше возможностей. Так много, что одной заметкой и не охватишь.

Например, можно выбрать из диапазона **с шагом**:

```python
random.randrange(10, 99, 3)
# 91
```

Или случайный **элемент последовательности**:

```python
numbers = [7, 9, 13, 42, 64, 99]
random.choice(numbers)
# 42
```

А то и **несколько** элементов:

```python
numbers = range(99, 10, -1)
random.choices(numbers, k=3)
# [32, 62, 76]
```

Можно еще и **веса** элементам назначить — чтобы одни выбирались чаще других:

```python
numbers = [7, 9, 13, 42, 64, 99]
weights = [10, 1, 1, 1, 1, 1]

random.choices(numbers, weights, k=3)
# [42, 13, 7]

random.choices(numbers, weights, k=3)
# [7, 7, 7]

random.choices(numbers, weights, k=3)
# [13, 7, 7]
```

Хотите выборку **без повторений**? Нет проблем:

```python
numbers = [7, 9, 13, 42, 64, 99]
random.sample(numbers, k=3)
# [42, 99, 7]
```

Или можно всю последовательность **перемешать**:

```python
numbers = [1, 2, 3, 4, 5]
random.shuffle(numbers)
# [3, 2, 1, 5, 4]
```

Еще есть вещественные распределения вроде `uniform()`, `gauss()`, `expovariate()`, `paretovariate()` и их многочисленных друзей. Не буду сейчас вдаваться в подробности — [убедитесь сами](https://docs.python.org/3/library/random.html#real-valued-distributions), если вы поклонник матстата.

И напоследок. Если используете случайные числа в тестах, всегда **инициализируйте** генератор константой, чтобы он давал воспроизводимые результаты:

```python
random.seed(42)
```

А в продакшене, наоборот, вызывайте `seed()` без параметров — так питон использует генератор шума операционной системы (или текущее время, если его нет).
