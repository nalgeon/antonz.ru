+++
date = 2022-05-31T12:30:00Z
title = "–õ–µ—Ç–∞—é—â–∞—è —Å–≤–∏–Ω—å—è, –∏–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –≤¬†Python"
description = "–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤."
image = "/protocol/cover.png"
slug = "protocol"
tags = ["ohmypy"]
subscribe = "ohmypy"
+++

–î–æ–ø—É—Å—Ç–∏–º, –≤—ã¬†–Ω–∞–ø–∏—Å–∞–ª–∏ —É—Ç–∏–ª–∏—Ç—É, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á—Ç–æ —É–≥–æ–¥–Ω–æ –≤¬†–ø–æ–ª–µ—Ç:

```python
def launch(thing):
    thing.fly()
```

–ù—É,¬†—Ç–æ¬†–µ—Å—Ç—å –Ω–µ¬†–ø—Ä—è–º _–≤—Å–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ_. –õ—é–±—É—é —à—Ç—É–∫—É —Å¬†–º–µ—Ç–æ–¥–æ–º `fly()`. –û—á–µ–Ω—å —É–¥–æ–±–Ω–æ ‚Äî –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –∑–∞–ø—É—Å–∫–∞–µ–º –∏¬†–≥–æ–ª—É–±—è –§—Ä–µ–Ω–∫–∞, –∏¬†—Å–∞–º–æ–ª–µ—Ç, –∏¬†–¥–∞–∂–µ –°—É–ø–µ—Ä–º–µ–Ω–∞:

```python
class Frank:
    def fly(self):
        print("üí©")

class Plane:
    def fly(self):
        print("–†–µ–π—Å –∑–∞–¥–µ—Ä–∂–∞–Ω")

class Superman:
    def fly(self):
        print("Œµ===(„Å£‚âßœâ‚â¶)„Å£")
```

```python
f = Frank()
launch(f)
# üí©

p = Plane()
launch(p)
# –†–µ–π—Å –∑–∞–¥–µ—Ä–∂–∞–Ω

s = Superman()
launch(s)
# Œµ===(„Å£‚âßœâ‚â¶)„Å£
```

–ù–µ¬†—Ç–æ¬†—á—Ç–æ–±—ã –Ω–∞—à–∏ –≥–µ—Ä–æ–∏ –æ—Å–æ–±–æ —É—Å–ø–µ—à–Ω–æ —Å–ø—Ä–∞–≤–ª—è–ª–∏—Å—å —Å¬†–∑–∞–¥–∞—á–µ–π, –Ω–æ¬†–∑–∞–ø—É—Å–∫ –Ω–∞¬†–Ω–∏—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç.

–†–∞–±–æ—Ç–∞–µ—Ç, –∏¬†–ª–∞–¥–Ω–æ. –ù–æ¬†–∏–Ω–æ–≥–¥–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–∑—Ä–∞—Å—Ç–∞–µ—Ç—Å—è) —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Ö–æ—á–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏. –î–∞—Ç—å –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `thing` –≤¬†`launch()`¬†‚Äî —ç—Ç–æ –Ω–µ¬†–ª—é–±–æ–π –æ–±—ä–µ–∫—Ç, –∞¬†–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ª–µ—Ç–∞—é—â–∞—è —Ö—Ä–µ–Ω–æ–≤–∏–Ω–∞ —Å¬†–º–µ—Ç–æ–¥–æ–º `fly()`. –ö–∞–∫ –ª—É—á—à–µ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å?

## –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ

–ï—Å–ª–∏ –≤—ã¬†–ø—Ä–∏–≤—ã–∫–ª–∏ –∏–∑–±–µ–≥–∞—Ç—å —Ç–∏–ø–æ–≤, —Ç–æ¬†–æ–±–æ–π–¥–µ—Ç–µ—Å—å –∏–º–µ–Ω–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –∫¬†—Ñ—É–Ω–∫—Ü–∏–∏:

```python
def launch(flyer):
    """Launces a flyer (an object with a `fly()` method)"""
    flyer.fly()
```

–ü–æ—á–µ–º—É¬†–±—ã –∏¬†–Ω–µ—Ç. –ë–µ–¥–∞ –≤¬†—Ç–æ–º, —á—Ç–æ —á–µ–º —Å–ª–æ–∂–Ω–µ–µ –∫–æ–¥, —Ç–µ–º —á–∞—â–µ —Å–±–æ–∏—Ç ¬´–æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–π¬ª¬†–ø–æ–¥—Ö–æ–¥.

## –ß–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å

–ï—Å–ª–∏ —Ä–∞—Å—á–µ—Ö–ª–∏—Ç—å –Ω–∞–≤—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –¥–∂–∞–≤–µ –∏–∑ 1990-—Ö –≥–æ–¥–æ–≤, –ø–æ–ª—É—á–∏—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è:

```python
class Flyer:
    def fly():
        ...

class Frank(Flyer):
    # ...

class Plane(Flyer):
    # ...

class Superman(Flyer):
    # ...
```

```python
def launch(thing: Flyer):
    thing.fly()
```

–ü–æ–¥—Ö–æ–¥ —Ä–∞–±–æ—á–∏–π:

```bash
$ mypy flyer.py
Success: no issues found in 1 source file
```

–ù–æ, –∫–∞–∫ –≥–æ–≤–æ—Ä—è—Ç –∞–≤—Ç–æ—Ä—ã Python, —É–∂–∞—Å–Ω–æ ¬´–Ω–µ–ø–∏—Ç–æ–Ω–∏—á–Ω—ã–π¬ª:

> The problem is that a class has to be explicitly marked, which is unpythonic and unlike what one would normally do in idiomatic dynamically typed Python code.

–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ. –ú–∞–ª–æ —Ç–æ–≥–æ, —á—Ç–æ –Ω–∞–º –ø—Ä–∏—à–ª–æ—Å—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ú–∞–ª–æ —Ç–æ–≥–æ, —á—Ç–æ —É¬†–Ω–∞—Å –≤¬†–∫–æ–¥–µ –∑–∞–≤–µ–ª–∞—Å—å –∏–µ—Ä–∞—Ä—Ö–∏—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –¢–∞–∫ –µ—â–µ –∏¬†–§—Ä–µ–Ω–∫, —Å–∞–º–æ–ª–µ—Ç –∏¬†–°—É–ø–µ—Ä–º–µ–Ω —Ç–µ–ø–µ—Ä—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –æ–±—â–∏–º –∑–Ω–∞–Ω–∏–µ–º –æ¬†—Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –õ–µ—Ç–∞—é—â–∏–µ –û–±—ä–µ–∫—Ç—ã. –ò–º¬†–ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –∂–∏–ª–æ—Å—å –∏¬†–±–µ–∑ —ç—Ç–æ–≥–æ, –∑–Ω–∞–µ—Ç–µ¬†–ª–∏.

## –ß–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª

–¶–∏—Ç–∞—Ç–∞ –≤—ã—à–µ –≤–∑—è—Ç–∞¬†–∏–∑¬†[PEP 544](https://peps.python.org/pep-0544/) (Python Enhancement Proposal, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ¬†–¥–æ—Ä–∞–±–æ—Ç–∫–µ), –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤¬†Python 3.8. –ù–∞—á–∏–Ω–∞—è —Å¬†—ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –≤¬†–ø–∏—Ç–æ–Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å _–ø—Ä–æ—Ç–æ–∫–æ–ª—ã_.

–ü—Ä–æ—Ç–æ–∫–æ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –í–æ—Ç –Ω–∞—à –õ–µ—Ç–∞—é—â–∏–π –û–±—ä–µ–∫—Ç:

```python
from typing import Protocol

class Flyer(Protocol):
    def fly(self):
        ...
```

–ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –æ–±–ª–∞–¥–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º. –§—É–Ω–∫—Ü–∏—è `launch()` —É–º–µ–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –õ–µ—Ç–∞—é—â–∏–µ –û–±—ä–µ–∫—Ç—ã:

```python
def launch(thing: Flyer):
    thing.fly()
```

–ü—Ä–∏—á–µ–º —Å–∞–º–∏–º –æ–±—ä–µ–∫—Ç–∞–º –Ω–µ¬†–Ω–∞–¥–æ –∑–Ω–∞—Ç—å –æ¬†–ø—Ä–æ—Ç–æ–∫–æ–ª–µ. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–ª–∞–¥–∞—Ç—å –Ω—É–∂–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º:

```python
class Frank:
    def fly(self):
        # ...

class Plane:
    def fly(self):
        # ...

class Superman:
    def fly(self):
        # ...
```

–ü—Ä–æ—Ç–æ–∫–æ–ª ‚Äî¬†—ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Ç–∏–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è:

-   –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —è–≤–Ω–æ –æ–ø–∏—Å–∞–Ω –≤¬†–ø—Ä–æ—Ç–æ–∫–æ–ª–µ: –ª–µ—Ç–∞—é—â–∏–π –æ–±—ä–µ–∫—Ç –æ–±–ª–∞–¥–∞–µ—Ç –º–µ—Ç–æ–¥–æ–º `fly()`;
-   –Ω–æ¬†—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –æ–Ω¬†–Ω–µ—è–≤–Ω–æ, –ø–æ¬†¬´—É—Ç–∏–Ω–æ–º—É¬ª¬†–ø—Ä–∏–Ω—Ü–∏–ø—É: —É¬†–°—É–ø–µ—Ä–º–µ–Ω–∞ –µ—Å—Ç—å –º–µ—Ç–æ–¥ `fly()`¬†‚Äî¬†–∑–Ω–∞—á–∏—Ç, –æ–Ω¬†–ª–µ—Ç–∞—é—â–∏–π –æ–±—ä–µ–∫—Ç.

–ü—Ä–æ–≤–µ—Ä–∏–º:

```bash
$ mypy flyer.py
Success: no issues found in 1 source file
```

–ò–¥–µ–∞–ª—å–Ω–æ!

## –ò—Ç–æ–≥–æ

–ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å¬†—Ä–∞–∑–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏¬†‚Äî¬†–≤—ã–¥–µ–ª–∏—Ç–µ —É¬†–Ω–∏—Ö –æ–±—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏¬†–≤—ã–Ω–µ—Å–∏—Ç–µ –≤¬†–ø—Ä–æ—Ç–æ–∫–æ–ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–ø-–ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ —Å¬†–ø–æ–º–æ—â—å—é mypy.

–ü–æ¬†–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–±–µ–≥–∞–π—Ç–µ –≥–æ–ª—É–±–µ–π, —Å–∞–º–æ–ª–µ—Ç–æ–≤ –∏¬†—Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–≤. –û—Ç¬†–Ω–∏—Ö –æ–¥–Ω–∏ –ø—Ä–æ–±–ª–µ–º—ã.
